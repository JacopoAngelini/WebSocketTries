<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Tries</title>
</head>

<body>
    <h1>Prove con il WebSocket</h1>
    <h3>Prima prova</h3>
    <p>provo a mandare e a ricevere dati al server creato con node.js basati sulla semplice connessione di un utente</p>
    <h3>Seconda prova</h3>
    <p>invio di un dato dal client al server</p>
    <label for="numero">Inserisci un numero</label>
    <input type="number" name="numero" id="numero">
    <button type="button" onclick="invio()">Invio</button>


</body>

<script>
    function parseLocation(url) {
    let a = document.createElement('a');
    a.href = url;

    return a;
}
    // automaticamente avvia la connessione al websocket server ospitato nella porta 8082
    let localURL = parseLocation(window.location);

    ws = new WebSocket("wss://" + localURL.host); 

    // il server ascolta un evento, in questo caso la sua apertura e esegue la callback, con send manda dei dati al 'message' del index.js
    ws.addEventListener('open', () => {
        console.log('utente collegato')
    })

    var numero;
    function invio() {
        numero = document.getElementById('numero').value;
        ws.send(numero)
    }


</script>

</html>